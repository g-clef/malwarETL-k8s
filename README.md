# malwarETL-k8s
## K8s policies/setup files for malwarETL installation

This is a set of scripts and configurations to install k8s on a local bare-metal repo, which I then run malwarETL on 
top of. 

The core of the system is an LXC/LXD cluster of ubuntu servers, with k8s installed on top of that using kubespray.

This has a few advantages: 
  1) kubespary + ansible means that adding/removing/updating nodes is done in a scripted way, rather than manually tweaking nodes.
2using kubespray means it's using kubeadm under the hood, we we're still getting the recommended settings for much of the node setup.

## Notes

You will need to set up ssh key access from the system/account running ansible to the VMs that actually hold the 
LXC/LXD cluster. You will need to do this for all of them. 

### Some notes on the LXC policy

The /dev/kmsg line comes from:
    https://github.com/kubernetes-sigs/kind/issues/662